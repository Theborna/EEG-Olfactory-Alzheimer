\RequirePackage{xcolor}
\RequirePackage{listings}
\RequirePackage{matlab-prettifier}
% default code style
% Default fixed font does not support bold face
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codeblue}{RGB}{49,49,255}
\definecolor{codeorange}{rgb}{1,0.49,0}
\definecolor{backcolour}{rgb}{0.95,0.95,0.96}
\lstdefinestyle{mystyle}{
backgroundcolor=\color{backcolour},
commentstyle=\color{codegray},
keywordstyle=\color{codeorange},
numberstyle=\small\color{codegray},
stringstyle=\color{codegreen},
basicstyle=\ttfamily\footnotesize,
moredelim=*[s][\colorIndex]{[}{]},
literate=*{:}{:}1,
breakatwhitespace=false,
breaklines=true,
captionpos=b,
keepspaces=true,
numbers=left,
numbersep=5pt,
showspaces=false,
showstringspaces=false,
showtabs=false,
tabsize=8,
xleftmargin=10pt,
mathescape=true,
frame=tb,
label={lst:code},
}
\lstset{style = mystyle}
\renewcommand\lstlistingname{Source Code}
\renewcommand\lstlistlistingname{Source Code}
% python
\lstdefinestyle{python-style}
{
  language=Python,
  basicstyle=\footnotesize\ttfamily,
  commentstyle=\color{codegray},
  morekeywords={self},              % Add keywords here
  keywordstyle=\color{codeblue},
  emph={MyClass,__init__},          % Custom highlighting
  emphstyle=\color{codeorange},    % Custom highlighting style
  stringstyle=\color{codegreen},
  frame=tb,                         % Any extra options here
  showstringspaces=false,
  label={lst:code:python},
}
% verilog
\definecolor{vgreen}{RGB}{104,180,104}
\definecolor{vblue}{RGB}{49,49,255}
\definecolor{vorange}{RGB}{255,143,102}
\lstdefinestyle{verilog-style}
{
language=Verilog,
basicstyle=\footnotesize\ttfamily,
backgroundcolor=\color{backcolour},
keywordstyle=\color{codeblue},
identifierstyle=\color{black},
commentstyle=\color{codegreen},
numbers=left,
numberstyle=\small\color{black},
numbersep=10pt,
tabsize=8,
moredelim=*[s][\colorIndex]{[}{]},
literate=*{:}{:}1,
breakatwhitespace=false,
breaklines=true,
captionpos=b,
keepspaces=true,
xleftmargin=10pt,
numbersep=5pt,
mathescape=true,
label={lst:code:verilog},
frame=tb,
}
\makeatletter
\newcommand*\@lbracket{[}
\newcommand*\@rbracket{]}
\newcommand*\@colon{:}
\newcommand*\colorIndex{%
  \edef\@temp{\the\lst@token}%
  \ifx\@temp\@lbracket \color{black}%
  \else\ifx\@temp\@rbracket \color{black}%
    \else\ifx\@temp\@colon \color{black}%
      \else \color{codeorange}%
      \fi\fi\fi
}

\newenvironment{matlab}{\begin{lstlisting}[style=Matlab-editor]
  }{\end{lstlisting}}
